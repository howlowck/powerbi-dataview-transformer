!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.dataviewTransformer=r():t.dataviewTransformer=r()}(window,function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=4)}([function(t,r,n){(function(r){var n="Expected a function",e="__lodash_hash_undefined__",o=1/0,u="[object Function]",c="[object GeneratorFunction]",i="[object Symbol]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,l=/^\./,s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,h="object"==typeof r&&r&&r.Object===Object&&r,y="object"==typeof self&&self&&self.Object===Object&&self,_=h||y||Function("return this")();var d,g=Array.prototype,b=Function.prototype,j=Object.prototype,m=_["__core-js_shared__"],O=(d=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=b.toString,x=j.hasOwnProperty,A=j.toString,S=RegExp("^"+w.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=_.Symbol,F=g.splice,P=B(_,"Map"),k=B(Object,"create"),E=$?$.prototype:void 0,M=E?E.toString:void 0;function T(t){var r=-1,n=t?t.length:0;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}function C(t){var r=-1,n=t?t.length:0;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}function I(t){var r=-1,n=t?t.length:0;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}function G(t,r){for(var n,e,o=t.length;o--;)if((n=t[o][0])===(e=r)||n!=n&&e!=e)return o;return-1}function R(t,r){for(var n,e=0,o=(r=function(t,r){if(K(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||N(t))return!0;return f.test(t)||!a.test(t)||null!=r&&t in Object(r)}(r,t)?[r]:K(n=r)?n:D(n)).length;null!=t&&e<o;)t=t[H(r[e++])];return e&&e==o?t:void 0}function q(t){return!(!L(t)||O&&O in t)&&(function(t){var r=L(t)?A.call(t):"";return r==u||r==c}(t)||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t)?S:v).test(function(t){if(null!=t){try{return w.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function z(t,r){var n,e,o=t.__data__;return("string"==(e=typeof(n=r))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?o["string"==typeof r?"string":"hash"]:o.map}function B(t,r){var n=function(t,r){return null==t?void 0:t[r]}(t,r);return q(n)?n:void 0}T.prototype.clear=function(){this.__data__=k?k(null):{}},T.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},T.prototype.get=function(t){var r=this.__data__;if(k){var n=r[t];return n===e?void 0:n}return x.call(r,t)?r[t]:void 0},T.prototype.has=function(t){var r=this.__data__;return k?void 0!==r[t]:x.call(r,t)},T.prototype.set=function(t,r){return this.__data__[t]=k&&void 0===r?e:r,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(t){var r=this.__data__,n=G(r,t);return!(n<0||(n==r.length-1?r.pop():F.call(r,n,1),0))},C.prototype.get=function(t){var r=this.__data__,n=G(r,t);return n<0?void 0:r[n][1]},C.prototype.has=function(t){return G(this.__data__,t)>-1},C.prototype.set=function(t,r){var n=this.__data__,e=G(n,t);return e<0?n.push([t,r]):n[e][1]=r,this},I.prototype.clear=function(){this.__data__={hash:new T,map:new(P||C),string:new T}},I.prototype.delete=function(t){return z(this,t).delete(t)},I.prototype.get=function(t){return z(this,t).get(t)},I.prototype.has=function(t){return z(this,t).has(t)},I.prototype.set=function(t,r){return z(this,t).set(t,r),this};var D=J(function(t){var r;t=null==(r=t)?"":function(t){if("string"==typeof t)return t;if(N(t))return M?M.call(t):"";var r=t+"";return"0"==r&&1/t==-o?"-0":r}(r);var n=[];return l.test(t)&&n.push(""),t.replace(s,function(t,r,e,o){n.push(e?o.replace(p,"$1"):r||t)}),n});function H(t){if("string"==typeof t||N(t))return t;var r=t+"";return"0"==r&&1/t==-o?"-0":r}function J(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new TypeError(n);var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var c=t.apply(this,n);return e.cache=u.set(o,c),c};return e.cache=new(J.Cache||I),e}J.Cache=I;var K=Array.isArray;function L(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function N(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&A.call(t)==i}t.exports=function(t,r,n){var e=null==t?void 0:R(t,r);return void 0===e?n:e}}).call(this,n(3))},function(t,r){var n=9007199254740991,e="[object Arguments]",o="[object Function]",u="[object GeneratorFunction]",c=/^(?:0|[1-9]\d*)$/;var i,a,f=Object.prototype,l=f.hasOwnProperty,s=f.toString,p=f.propertyIsEnumerable,v=(i=Object.keys,a=Object,function(t){return i(a(t))}),h=Math.max,y=!p.call({valueOf:1},"valueOf");function _(t,r){var n=m(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&O(t)}(t)&&l.call(t,"callee")&&(!p.call(t,"callee")||s.call(t)==e)}(t)?function(t,r){for(var n=-1,e=Array(t);++n<t;)e[n]=r(n);return e}(t.length,String):[],o=n.length,u=!!o;for(var c in t)!r&&!l.call(t,c)||u&&("length"==c||g(c,o))||n.push(c);return n}function d(t,r,n){var e=t[r];l.call(t,r)&&j(e,n)&&(void 0!==n||r in t)||(t[r]=n)}function g(t,r){return!!(r=null==r?n:r)&&("number"==typeof t||c.test(t))&&t>-1&&t%1==0&&t<r}function b(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||f)}function j(t,r){return t===r||t!=t&&r!=r}var m=Array.isArray;function O(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!function(t){var r=w(t)?s.call(t):"";return r==o||r==u}(t)}function w(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var x=function(t){return r=function(r,n){var e=-1,o=n.length,u=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(u=t.length>3&&"function"==typeof u?(o--,u):void 0,c&&function(t,r,n){if(!w(n))return!1;var e=typeof r;return!!("number"==e?O(n)&&g(r,n.length):"string"==e&&r in n)&&j(n[r],t)}(n[0],n[1],c)&&(u=o<3?void 0:u,o=1),r=Object(r);++e<o;){var i=n[e];i&&t(r,i,e,u)}return r},n=h(void 0===n?r.length-1:n,0),function(){for(var t=arguments,e=-1,o=h(t.length-n,0),u=Array(o);++e<o;)u[e]=t[n+e];e=-1;for(var c=Array(n+1);++e<n;)c[e]=t[e];return c[n]=u,function(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}(r,this,c)};var r,n}(function(t,r){if(y||b(r)||O(r))!function(t,r,n,e){n||(n={});for(var o=-1,u=r.length;++o<u;){var c=r[o],i=e?e(n[c],t[c],c,n,t):void 0;d(n,c,void 0===i?t[c]:i)}}(r,function(t){return O(t)?_(t):function(t){if(!b(t))return v(t);var r=[];for(var n in Object(t))l.call(t,n)&&"constructor"!=n&&r.push(n);return r}(t)}(r),t);else for(var n in r)l.call(r,n)&&d(t,n,r[n])});t.exports=x},function(t,r){var n=9007199254740991,e="[object Function]",o="[object GeneratorFunction]";var u=Object.prototype.toString,c=Math.max;var i,a,f=(i=function(t){if(!t||!t.length)return[];var r=0;return t=function(t,r){for(var n=-1,e=t?t.length:0,o=0,u=[];++n<e;){var c=t[n];r(c,n,t)&&(u[o++]=c)}return u}(t,function(t){if(function(t){return!!t&&"object"==typeof t}(i=t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!function(t){var r=function(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}(t)?u.call(t):"";return r==e||r==o}(t)}(i))return r=c(t.length,r),!0;var i}),function(t,r){for(var n=-1,e=Array(t);++n<t;)e[n]=r(n);return e}(r,function(r){return function(t,r){for(var n=-1,e=t?t.length:0,o=Array(e);++n<e;)o[n]=r(t[n],n,t);return o}(t,(n=r,function(t){return null==t?void 0:t[n]}));var n})},a=c(void 0===a?i.length-1:a,0),function(){for(var t=arguments,r=-1,n=c(t.length-a,0),e=Array(n);++r<n;)e[r]=t[a+r];r=-1;for(var o=Array(a+1);++r<a;)o[r]=t[r];return o[a]=e,function(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}(i,this,o)});t.exports=f},function(t,r){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,r,n){"use strict";n.r(r),n.d(r,"categoryTransform",function(){return f});var e=n(0),o=n.n(e),u=n(2),c=n.n(u),i=n(1),a=n.n(i);function f(t,r,n){const e=o()(t,"categorical.categories",[]),u=o()(t,"categorical.values",[]),i=t=>{const r=Object.keys(o()(t,"source.roles"))[0];return t.values.map(t=>({[r]:t}))},f=e.filter(t=>Object.keys(o()(t,"source.roles"))[0]===r),l=f.map(i),s=u.map(i);let p=c()(...l,...s).map(t=>a()({},...t));return n&&(p=p.map((t,r)=>({...t,selectionId:n().withCategory(f[0],r).createSelectionId()}))),p}}])});